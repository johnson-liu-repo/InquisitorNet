%PDF-1.4
%
1 0 obj
<< /Type /Catalog /Pages 2 0 R >>
endobj
2 0 obj
<< /Type /Pages /Kids [3 0 R 5 0 R 7 0 R] /Count 3 >>
endobj
3 0 obj
<< /Type /Page /Parent 2 0 R /MediaBox [0 0 612 792] /Contents 4 0 R /Resources << /Font << /F1 9 0 R >> >> >>
endobj
4 0 obj
<< /Length 2986 >>
stream
BT
/F1 12 Tf
72 720 Td
(# InquisitorNet Functional Modules & Refactor Report) Tj
0 -14 Td
() Tj
0 -14 Td
(## Refactor Summary \(What Changed & Why\)) Tj
0 -14 Td
(This report documents the directory refactor that removed the phase-based layout in favor) Tj
0 -14 Td
(of functional, capability-driven modules. The goal is to make the repository easier to) Tj
0 -14 Td
(navigate, align with common Python package conventions, and decouple directory names from) Tj
0 -14 Td
(implementation milestones.) Tj
0 -14 Td
() Tj
0 -14 Td
(### Why the change) Tj
0 -14 Td
(- **Clarity over chronology:** Phase names describe project progress, not what the code) Tj
0 -14 Td
(does. Functional folders make discovery and ownership clearer.) Tj
0 -14 Td
(- **Scalability:** As features grow, functional modules make it easier to add new) Tj
0 -14 Td
(capabilities without creating new “phase” buckets.) Tj
0 -14 Td
(- **Standard Python structure:** Grouping by capability aligns with common industry) Tj
0 -14 Td
(layouts \(e.g., `ingestion`, `policy`, `metrics`\).) Tj
0 -14 Td
() Tj
0 -14 Td
(### What changed \(high level\)) Tj
0 -14 Td
(- **Removed**: `phase1/`, `phase2/`, `phase3/` directory structure.) Tj
0 -14 Td
(- **Added**: `inquisitor/` package with functional subpackages.) Tj
0 -14 Td
(- **Updated**: CLI module paths, imports, and documentation references.) Tj
0 -14 Td
(- **Regenerated**: This PDF to provide an auditable report of the refactor.) Tj
0 -14 Td
() Tj
0 -14 Td
(### Old → New module mapping) Tj
0 -14 Td
(| Old path | New path | Rationale |) Tj
0 -14 Td
(| --- | --- | --- |) Tj
0 -14 Td
(| `phase1/cli.py` | `inquisitor/ingestion/cli.py` | CLI belongs to ingestion pipeline. |) Tj
0 -14 Td
(| `phase1/config.py` | `inquisitor/ingestion/config.py` | Configuration is ingestion-) Tj
0 -14 Td
(specific. |) Tj
0 -14 Td
(| `phase1/db.py` | `inquisitor/ingestion/db.py` | DB helpers are used by ingestion. |) Tj
0 -14 Td
(| `phase1/scraper.py` | `inquisitor/ingestion/scraper.py` | Scraper is the ingestion entry) Tj
0 -14 Td
(point. |) Tj
0 -14 Td
(| `phase1/detector.py` | `inquisitor/ingestion/detector.py` | Detector is part of) Tj
0 -14 Td
(ingestion pipeline. |) Tj
0 -14 Td
(| `phase2/gate.py` | `inquisitor/policy/gate.py` | Gate is a policy capability. |) Tj
0 -14 Td
(| `phase2/gate_cli.py` | `inquisitor/policy/gate_cli.py` | CLI aligns with policy) Tj
0 -14 Td
(capability. |) Tj
0 -14 Td
(| `phase2/label_cli.py` | `inquisitor/labeling/label_cli.py` | Labeling is a standalone) Tj
0 -14 Td
(capability. |) Tj
0 -14 Td
(| `phase2/metrics_job.py` | `inquisitor/metrics/metrics_job.py` | Metrics is a reporting) Tj
0 -14 Td
(capability. |) Tj
0 -14 Td
(| `phase3/inquisitor_cli.py` | `inquisitor/operations/inquisitor_cli.py` | Action planning) Tj
0 -14 Td
(is an operations concern. |) Tj
0 -14 Td
(| `phase3/bots/base.py` | `inquisitor/operations/bots/base.py` | Bots are part of) Tj
0 -14 Td
(operations. |) Tj
0 -14 Td
() Tj
0 -14 Td
(---) Tj
0 -14 Td
ET
endstream
endobj
5 0 obj
<< /Type /Page /Parent 2 0 R /MediaBox [0 0 612 792] /Contents 6 0 R /Resources << /Font << /F1 9 0 R >> >> >>
endobj
6 0 obj
<< /Length 2328 >>
stream
BT
/F1 12 Tf
72 720 Td
() Tj
0 -14 Td
(## Functional Module Guide) Tj
0 -14 Td
() Tj
0 -14 Td
(### Ingestion \(`inquisitor/ingestion/`\)) Tj
0 -14 Td
(**Purpose:** Ingest data, store in SQLite, and run the rule-based detector.) Tj
0 -14 Td
() Tj
0 -14 Td
(- `cli.py`) Tj
0 -14 Td
(  - Entry point for the ingestion pipeline.) Tj
0 -14 Td
(  - Loads settings from `config/` via `inquisitor.ingestion.config.Settings`.) Tj
0 -14 Td
(  - Applies migrations \(`migrations/001_init.sql`, `migrations/004_offline_fixtures.sql`\).) Tj
0 -14 Td
(  - Runs scraper and detector, then prints a summary.) Tj
0 -14 Td
(- `config.py`) Tj
0 -14 Td
(  - Loads YAML configuration \(`subreddits.yml`, `scraper_rules.yml`,) Tj
0 -14 Td
(`detector_rules.yml`\).) Tj
0 -14 Td
(  - Sets the database path \(defaults to `inquisitor_net_phase1.db`\).) Tj
0 -14 Td
(- `db.py`) Tj
0 -14 Td
(  - SQLite connection and migration helpers.) Tj
0 -14 Td
(- `scraper.py`) Tj
0 -14 Td
(  - Reads from fixtures, offline DB, or Reddit API.) Tj
0 -14 Td
(  - Applies regex include/exclude rules and `discard_if` filters.) Tj
0 -14 Td
(  - Writes kept items to `scrape_hits`.) Tj
0 -14 Td
(- `detector.py`) Tj
0 -14 Td
(  - Compiles regex rules with weights and exculpatory patterns.) Tj
0 -14 Td
(  - Inserts into `detector_marks` or `detector_acquittals` based on thresholds.) Tj
0 -14 Td
() Tj
0 -14 Td
(### Policy \(`inquisitor/policy/`\)) Tj
0 -14 Td
(**Purpose:** Apply policy checks to outgoing drafts.) Tj
0 -14 Td
() Tj
0 -14 Td
(- `gate.py`) Tj
0 -14 Td
(  - Loads rules from `config/policy_gate.yml`.) Tj
0 -14 Td
(  - Returns `allow`, `flag`, or `block` decisions with reasons.) Tj
0 -14 Td
(- `gate_cli.py`) Tj
0 -14 Td
(  - Reads JSONL drafts and writes JSONL decisions.) Tj
0 -14 Td
() Tj
0 -14 Td
(### Labeling \(`inquisitor/labeling/`\)) Tj
0 -14 Td
(**Purpose:** Human labeling of detector outcomes.) Tj
0 -14 Td
() Tj
0 -14 Td
(- `label_cli.py`) Tj
0 -14 Td
(  - Samples `detector_marks` / `detector_acquittals`.) Tj
0 -14 Td
(  - Prompts for TP/FP/TN/FN labels and writes to `labels`.) Tj
0 -14 Td
() Tj
0 -14 Td
(### Metrics \(`inquisitor/metrics/`\)) Tj
0 -14 Td
(**Purpose:** Aggregated reporting for model quality.) Tj
0 -14 Td
() Tj
0 -14 Td
(- `metrics_job.py`) Tj
0 -14 Td
(  - Computes precision/recall/F1 from `labels`.) Tj
0 -14 Td
ET
endstream
endobj
7 0 obj
<< /Type /Page /Parent 2 0 R /MediaBox [0 0 612 792] /Contents 8 0 R /Resources << /Font << /F1 9 0 R >> >> >>
endobj
8 0 obj
<< /Length 1310 >>
stream
BT
/F1 12 Tf
72 720 Td
(  - Writes CSV and Markdown reports to `reports/metrics/`.) Tj
0 -14 Td
() Tj
0 -14 Td
(### Operations \(`inquisitor/operations/`\)) Tj
0 -14 Td
(**Purpose:** Plan actions based on detector outputs.) Tj
0 -14 Td
() Tj
0 -14 Td
(- `inquisitor_cli.py`) Tj
0 -14 Td
(  - Reads marks, chooses actions via bots, gates post drafts.) Tj
0 -14 Td
(  - Writes `planned_actions` and `dossiers` in SQLite.) Tj
0 -14 Td
(- `bots/base.py`) Tj
0 -14 Td
(  - Defines `BaseBot` decision logic and `InquisitorPersonality`.) Tj
0 -14 Td
() Tj
0 -14 Td
(---) Tj
0 -14 Td
() Tj
0 -14 Td
(## Updated CLI Entry Points) Tj
0 -14 Td
(- `python -m inquisitor.ingestion.cli`) Tj
0 -14 Td
(- `python -m inquisitor.policy.gate_cli`) Tj
0 -14 Td
(- `python -m inquisitor.labeling.label_cli`) Tj
0 -14 Td
(- `python -m inquisitor.metrics.metrics_job`) Tj
0 -14 Td
(- `python -m inquisitor.operations.inquisitor_cli`) Tj
0 -14 Td
() Tj
0 -14 Td
(---) Tj
0 -14 Td
() Tj
0 -14 Td
(## Compatibility Notes) Tj
0 -14 Td
(- Database schema remains unchanged; existing migrations still apply.) Tj
0 -14 Td
(- Import paths have been updated to match new module locations.) Tj
0 -14 Td
(- Phase naming is retained in data/models for historical continuity, but directory names) Tj
0 -14 Td
(are now functional.) Tj
0 -14 Td
ET
endstream
endobj
9 0 obj
<< /Type /Font /Subtype /Type1 /BaseFont /Helvetica >>
endobj
xref
0 10
0000000000 65535 f 
0000000015 00000 n 
0000000064 00000 n 
0000000133 00000 n 
0000000259 00000 n 
0000003296 00000 n 
0000003422 00000 n 
0000005801 00000 n 
0000005927 00000 n 
0000007288 00000 n 
trailer
<< /Size 10 /Root 1 0 R >>
startxref
7358
%%EOF
